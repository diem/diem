<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `discovery` mod in crate `network`."><meta name="keywords" content="rust, rustlang, rust-lang, discovery"><title>network::protocols::discovery - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../network/index.html'><div class='logo-container'><img src='../../../rust-logo.png' alt='logo'></div></a><p class='location'>Module discovery</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class='location'><a href='../../index.html'>network</a>::<wbr><a href='../index.html'>protocols</a></p><script>window.sidebarCurrent = {name: 'discovery', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../src/network/protocols/discovery/mod.rs.html#4-602' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../../index.html'>network</a>::<wbr><a href='../index.html'>protocols</a>::<wbr><a class="mod" href=''>discovery</a></span></h1><div class='docblock'><p>Protocol to discover network addresses of other peers on the Libra network</p>
<h2 id="implementation" class="section-header"><a href="#implementation">Implementation</a></h2>
<p>The discovery module is implemented as a stand-alone actor in the Network sub-system of the
Libra stack. The actor participates in discovery by periodically sending its observed state of
the network to a randomly chosen peer. Other peers are also expected to be running the same
protocol. Therefore, in expectation, every peer expects to hear from 1 other peer in each
round. On hearing from the remote peer, the local discovery module tries to reconcile its state
to reflect any changes. In addition to updating its state, it also passes on new information to
the <a href="../../connectivity_manager"><code>ConnectivityManager</code></a> module.</p>
<p>For the initial bootstrap of a node, it sends the discovery message to a randomly chosen seed
peer in each round. The message only contains the identity of this peer unless it learns more
about the network membership from another peer.</p>
<p>Currently we do not use this mechanism to detect peer failures - instead, we simply connect to
all the peers in the network, and hope to learn about their failure on connection errors.</p>
<p>TODO: We need to handle to case of peers who may no longer be a part of the network.</p>
<h2 id="future-work" class="section-header"><a href="#future-work">Future work</a></h2>
<ul>
<li>Currently, we do not try to detect/punish nodes which are just lurking (without contributing
to the protocol), or actively trying to spread misinformation in the network. In the future, we
plan to remedy this by introducing a module dedicated to detecting byzantine behavior, and by
making the discovery protocol itself tolerant to byzantine faults.</li>
</ul>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Discovery.html" title='network::protocols::discovery::Discovery struct'>Discovery</a></td><td class='docblock-short'><p>The actor running the discovery protocol.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.DiscoveryMsg.html" title='network::protocols::discovery::DiscoveryMsg struct'>DiscoveryMsg</a></td><td class='docblock-short'><p>A Discovery message contains notes collected from other peers within the system.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.DiscoveryNetworkSender.html" title='network::protocols::discovery::DiscoveryNetworkSender struct'>DiscoveryNetworkSender</a></td><td class='docblock-short'><p>The interface from Discovery to Networking layer.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.FullNodeInfo.html" title='network::protocols::discovery::FullNodeInfo struct'>FullNodeInfo</a></td><td class='docblock-short'><p>Discovery information relevant to public full nodes and clients.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.FullNodeInfoHasher.html" title='network::protocols::discovery::FullNodeInfoHasher struct'>FullNodeInfoHasher</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.Note.html" title='network::protocols::discovery::Note struct'>Note</a></td><td class='docblock-short'><p>A <code>Note</code> contains a validator's signed <code>PeerInfo</code> as well as a signed
<code>FullNodePayload</code>, which provides relevant discovery info for public full
nodes and clients.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.PeerInfo.html" title='network::protocols::discovery::PeerInfo struct'>PeerInfo</a></td><td class='docblock-short'><p>A <code>PeerInfo</code> represents the network address(es) of a Peer.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.PeerInfoHasher.html" title='network::protocols::discovery::PeerInfoHasher struct'>PeerInfoHasher</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.SignedFullNodeInfo.html" title='network::protocols::discovery::SignedFullNodeInfo struct'>SignedFullNodeInfo</a></td><td class='docblock-short'><p>A <code>FullNodeInfo</code> authenticated by the peer's root <code>network_signing_key</code> stored on-chain.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.SignedPeerInfo.html" title='network::protocols::discovery::SignedPeerInfo struct'>SignedPeerInfo</a></td><td class='docblock-short'><p>A <code>PeerInfo</code> authenticated by the peer's root <code>network_signing_key</code> stored on-chain.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.VerifiedNote.html" title='network::protocols::discovery::VerifiedNote struct'>VerifiedNote</a></td><td class='docblock-short'></td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.add_to_network.html" title='network::protocols::discovery::add_to_network fn'>add_to_network</a></td><td class='docblock-short'><p>Register the discovery sender and event handler with network and return interfaces for those
actors.</p>
</td></tr></table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table><tr class='module-item'><td><a class="type" href="type.DiscoveryNetworkEvents.html" title='network::protocols::discovery::DiscoveryNetworkEvents type'>DiscoveryNetworkEvents</a></td><td class='docblock-short'><p>The interface from Network to Discovery module.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../";window.currentCrate = "network";</script><script src="../../../aliases.js"></script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>